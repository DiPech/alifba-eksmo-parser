# Alifba Eksmo Parser

## 1. Предисловие

Это один из внутренних проектов, реализованных в рамках работы над интернет-магазином [alifba.ru](https://alifba.ru). Он не доведён до идеала (например, не используется Unit тестирование, не писал с использованием TDD методологии), т.к. разрабатывал в свободное время, но достаточно стабилен для использования на production, и это приемлемо для заказчика и его бизнес-требований.

Note: Это копия репозитория на момент 10 мая 2020, с целью выложить в качестве примера production-ready проекта с использованием Spring Boot для реализации консольного приложения.

## 2. Описание проекта

Изначально, в интернет-магазине [alifba.ru](https://alifba.ru) был реализован гибкий и мощный механизм импортирования разделов, товаров и их характеристик из YML (Yandex XML) файлов.
Все поставщики товаров для нашего интернет-магазина, так или иначе в итоге предоставили YML выгрузки, кроме одного поставщика - Eksmo. И так уже получилось, что по степени важности он был на первом месте.
Соответственно, было принято решение написать инструмент, который позволил бы сделать необходимое.

## 3. Почему данное приложение реализовано как консольное Spring приложение, а не часть модуля импорта интернет-магазина

Для того, чтобы импортировать данного поставщика, предполагается использовать его API. 

Предоставленное API поставщика сделано, скажем так, мягко говоря не лучшим образом:
- API возвращает целый набор XML-ок, до кучи разбитых на части пагинацией.
- Нет привычной сущности "Каталог" (зато есть куча отдельных сущностей, на которые каталог разбит, и эти сущности друг с другом связаны).
- API часто возвращает товары с битыми или неправильными данными (например, указан ID поставщика, которого нет в их же базе).
- Суммарный размер всех файлов, полученных по API, для production базы более 3 ГБ.
- Причем из них нам нужны были только определенные поставщики и определенные товары по определенным критериям.
- И еще много-много костылей и проблем.

Зная, как PHP имеет свойство "замедляться" в случае долгоиграющих скриптов и особенно при обработке большого объёма данных, было решено реализовать эту логику на более подходящем инструменте.

## 4. Как работает проект

В два (или три) этапа:
- Выгрузка всех данных из API.
- Построение статистики для анализа (Опционально).
- Конвертирование всех выгруженных данных в итоговый YML файл, пригодный для импортирования на сайт.

## 5. Как собрать и запустить проект из консоли

См. оригинальный readme файл [readme.dev.md](./readme.dev.md)
